<?xml version="1.0" encoding="UTF-8"?>


<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "spring-beans.dtd"  >
<beans>
  <bean id="personServiceTarget" class="com.smartitengineering.user.impl.PersonServiceImpl">
    <property name="basicIdentityReadDao">
      <ref local="abstractDao" />
    </property>
  </bean>
    
  <bean id="userPersonService" class="com.smartitengineering.user.impl.UserPersonServiceImpl" parent="abstractDao">
    <property name="personService">
      <ref local="personService" />
    </property>
    <property name="userService">
      <ref local="userService" />
    </property>
  </bean>
    
  <bean id="personDeleteAdvice" class="com.smartitengineering.user.advice.PersonDeleteAdvice">
    <property name="userPersonService">
      <ref local="userPersonService"/>
    </property>
  </bean>
  <bean id="personDeleteAdvisor" class="org.springframework.aop.support.RegexpMethodPointcutAdvisor">
    <property name="advice" ref="personDeleteAdvice"/>
    <property name="pattern" value=".*PersonServiceImpl.delete" />
  </bean>
  <bean id="personService" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="target" ref="personServiceTarget" />
    <property name="interceptorNames" value="personDeleteAdvisor" />
  </bean>
    
  <bean id="userServiceTarget" class="com.smartitengineering.user.service.impl.UserServiceImpl" parent="abstractDao"/>

  <bean id="userDeleteAdvice" class="com.smartitengineering.user.advice.UserDeleteAdvice">
    <property name="userPersonService">
      <ref local="userPersonService"/>
    </property>
  </bean>
  <bean id="userDeleteAdvisor" class="org.springframework.aop.support.RegexpMethodPointcutAdvisor">
    <property name="advice" ref="userDeleteAdvice"/>
    <property name="pattern" value=".*UserServiceImpl.delete" />
  </bean>
  <bean id="userService" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="target" ref="userServiceTarget" />
    <property name="interceptorNames" value="userDeleteAdvisor" />
  </bean>

  <bean id="abstractDao" class="com.smartitengineering.dao.impl.hibernate.AbstractCommonDaoImpl" abstract="true">
    <property name="sessionFactory">
      <ref bean="sessionFactory" />
    </property>
  </bean>
  <bean id="organizationService" class="com.smartitengineering.user.service.impl.OrganizationServiceImpl" parent="abstractDao"/>

  <bean id="securedObjectService" class="com.smartitengineering.user.service.impl.SecuredObjectServiceImpl" parent="abstractDao"/>

  <bean id="privilegeService" class="com.smartitengineering.user.service.impl.PrivilegeServiceImpl" parent="abstractDao"/>
    

  <bean id="roleService" class="com.smartitengineering.user.service.impl.RoleServiceImpl" parent="abstractDao"/>

  <bean id="authorizationService" class="com.smartitengineering.user.service.impl.AuthorizationServiceImpl">
    <property name="securedObjectService">
      <ref bean="securedObjectService"/>
    </property>
    <property name="userService">
      <ref bean="userService"/>
    </property>
  </bean>

    
    <!-- **************************************************************** -->
    <!-- ********************* Smart Util Reg *************************** -->
    <!-- **************************************************************** -->
  <bean id="beanRegistrar" class="com.smartitengineering.util.bean.spring.SpringBeanRegistrar">
    <property name="beanFactoryContextName">
      <value>com.smartitengineering.user.service</value>
    </property>
  </bean>
    
</beans>
